# MCP 测试用例集

> 用于在前端界面测试 MCP 工具集成能力

## 📋 测试说明

将下表中的「测试输入」发送给 Agent，观察是否正确调用对应的 MCP 工具并返回合理结果。

---

## 🔧 TOP 服务器测试（场站运营）

### 1. 场站查询 (`mcp__top__query_station`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 1.1 | 按 ID 查询 | `查询 ST001 场站的信息` | query_station | 返回场站基本信息 |
| 1.2 | 按名称模糊查询 | `帮我找一下龙岗相关的场站` | query_station | 返回包含"龙岗"的场站列表 |
| 1.3 | 查询所有场站 | `列出所有场站` | query_station | 返回场站总数和列表 |
| 1.4 | 查询设备状态 | `ST001 有哪些设备？运行状态如何？` | query_device | 返回设备列表和状态 |
| 1.5 | 多条件查询 | `查询 ST002 场站的设备信息` | query_device | 指定场站的设备 |

### 2. 实时监控 (`mcp__top__get_realtime_metrics`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 2.1 | 场站指标 | `ST001 场站现在的压力和流量是多少？` | get_realtime_metrics | 返回实时指标数据 |
| 2.2 | 多场站对比 | `对比 ST001 和 ST002 的运行指标` | get_realtime_metrics | 返回对比数据 |
| 2.3 | 异常检测 | `当前有没有指标异常的场站？` | get_realtime_metrics | 检测异常并告警 |

### 3. 管网状态 (`mcp__top__get_pipeline_status`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 3.1 | 整体状态 | `当前管网运行状态如何？` | get_pipeline_status | 返回管网概况 |
| 3.2 | 压力监测 | `管网压力是否正常？` | get_pipeline_status | 返回压力数据 |
| 3.3 | 流量分析 | `今天的供气流量情况怎么样？` | get_pipeline_status | 返回流量统计 |
| 3.4 | 泄漏检测 | `有没有检测到管道泄漏？` | get_pipeline_status | 返回泄漏检测结果 |

### 4. 日报生成 (`mcp__top__generate_daily_report`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 4.1 | 生成日报 | `生成今天的运营日报` | generate_daily_report | 返回完整日报 |
| 4.2 | 指定日期 | `生成 2026-02-18 的日报` | generate_daily_report | 返回指定日期日报 |

---

## 📚 Knowledge 服务器测试（知识库）

### 5. FAQ 搜索 (`mcp__knowledge__search_faq`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 5.1 | 关键词搜索 | `如何缴纳燃气费？` | search_faq | 返回缴费相关 FAQ |
| 5.2 | 安全相关 | `发现燃气泄漏怎么办？` | search_faq | 返回泄漏处理 FAQ |
| 5.3 | 设备维护 | `燃气表多久需要检定一次？` | search_faq | 返回检定周期 FAQ |
| 5.4 | 分类查询 | `有哪些关于用气安全的常见问题？` | search_faq | 按分类返回 FAQ |

### 6. 应急指南 (`mcp__knowledge__get_emergency_guide`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 6.1 | 管道泄漏 | `如果发生管道泄漏应该怎么处理？` | get_emergency_guide | 返回泄漏应急步骤 |
| 6.2 | 设备故障 | `设备故障的应急处置流程是什么？` | get_emergency_guide | 返回故障处理步骤 |
| 6.3 | 压力异常 | `压力过高时如何应急处理？` | get_emergency_guide | 返回压力异常处理 |
| 6.4 | 综合应急 | `有哪些应急预案？` | get_emergency_guide | 返回所有应急类型 |

### 7. 知识搜索 (`mcp__knowledge__search_knowledge`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 7.1 | 技术知识 | `调压站的工作原理是什么？` | search_knowledge | 返回调压站知识 |
| 7.2 | 天然气特性 | `天然气有哪些特性？` | search_knowledge | 返回天然气知识 |
| 7.3 | 设备分类 | `燃气设备有哪些类型？` | search_knowledge | 返回设备分类 |

### 8. 用气预测 (`mcp__knowledge__get_gas_prediction`)

| # | 场景 | 测试输入 | 预期调用工具 | 验证点 |
|---|------|---------|-------------|--------|
| 8.1 | 明日预测 | `预测明天的用气量` | get_gas_prediction | 返回预测数据 |
| 8.2 | 指定日期 | `预测 2026-02-25 的用气量` | get_gas_prediction | 返回指定日期预测 |
| 8.3 | 场站预测 | `ST001 场站明天的用气量预测` | get_gas_prediction | 返回场站级预测 |

---

## 🔄 组合测试（多工具协作）

### 9. 复杂场景测试

| # | 场景 | 测试输入 | 预期调用的工具 | 验证点 |
|---|------|---------|---------------|--------|
| 9.1 | 运营分析 | `分析今天 ST001 场站的运营情况，并给出建议` | query_station + get_realtime_metrics + generate_daily_report | 多工具协作 |
| 9.2 | 安全检查 | `检查所有场站的运行状态，有没有异常或安全隐患？` | query_station + get_pipeline_status + get_realtime_metrics | 异常检测 |
| 9.3 | 应急响应 | `如果 ST001 发生泄漏，应该如何处理？告诉我场站信息和应急步骤` | query_station + get_emergency_guide | 场站+应急 |
| 9.4 | 综合报告 | `生成一份包含场站状态、管网运行和用气预测的综合报告` | 多个工具 | 综合分析 |
| 9.5 | 客服场景 | `用户问：我家燃气表好像不准，怎么处理？` | search_faq + search_knowledge | 知识检索 |

---

## 🎯 边界测试

### 10. 异常和边界情况

| # | 场景 | 测试输入 | 预期行为 |
|---|------|---------|---------|
| 10.1 | 不存在的场站 | `查询 ST999 的信息` | 返回"未找到"或提示可用场站 |
| 10.2 | 无效日期 | `预测 2025-13-45 的用气量` | 返回日期格式错误提示 |
| 10.3 | 模糊输入 | `场站` | 提示需要更具体的信息 |
| 10.4 | 超出范围 | `查询北京场站的信息` | 返回不在服务范围提示 |
| 10.5 | 工具无关问题 | `今天天气怎么样？` | 回复无法处理或尝试通用回答 |

---

## 📊 测试记录模板

```markdown
## 测试执行记录

日期：______
测试人员：______

| 用例编号 | 执行结果 | 实际响应 | 问题备注 |
|---------|---------|---------|---------|
| 1.1 | ✅/❌ | | |
| 1.2 | ✅/❌ | | |
| ... | | | |

### 发现的问题
1.
2.
3.
```

---

## 🚀 快速测试脚本

复制以下内容，在前端逐条发送：

```
--- 基础测试 ---
查询 ST001 场站信息
列出所有场站
ST001 现在的运行指标
当前管网状态
生成今天的日报

--- 知识库测试 ---
如何缴纳燃气费？
发现燃气泄漏怎么办？
调压站的工作原理
预测明天的用气量

--- 应急测试 ---
管道泄漏怎么处理？
设备故障应急流程

--- 综合测试 ---
分析 ST001 的运营情况并给建议
检查所有场站是否有安全隐患
```

---

## 📝 预期 MCP 工具映射

| 用户意图 | 应调用的 MCP 工具 |
|---------|------------------|
| 查询场站/站点/门站 | `mcp__top__query_station` |
| 查询设备/阀门/调压器 | `mcp__top__query_device` |
| 实时指标/压力/流量/温度 | `mcp__top__get_realtime_metrics` |
| 管网/管道/泄漏检测 | `mcp__top__get_pipeline_status` |
| 日报/报告/汇总 | `mcp__top__generate_daily_report` |
| 常见问题/FAQ/如何/怎么 | `mcp__knowledge__search_faq` |
| 应急/泄漏处理/故障处理 | `mcp__knowledge__get_emergency_guide` |
| 知识/原理/特性/介绍 | `mcp__knowledge__search_knowledge` |
| 预测/预估用气 | `mcp__knowledge__get_gas_prediction` |
