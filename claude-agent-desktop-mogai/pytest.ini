[pytest]
# pytest 配置文件
# Towngas Manus 项目测试配置

# 测试发现路径
testpaths = backend/tests

# Python 文件和类的命名模式
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 异步测试支持
asyncio_mode = auto

# 输出设置
addopts =
    # 详细输出
    -v
    # 显示测试进度
    --tb=short
    # 覆盖率报告
    --cov=app
    --cov-report=term-missing
    --cov-report=html:htmlcov
    # --cov-fail-under=80  # 暂时禁用，等待测试改为真实模块导入
    # 警告设置
    -W ignore::DeprecationWarning
    # 严格的标记模式
    --strict-markers

# 自定义标记
markers =
    unit: 单元测试，测试单个函数或类
    integration: 集成测试，测试多个组件协作
    e2e: 端到端测试，测试完整用户流程
    slow: 运行较慢的测试
    asyncio: 异步测试标记

# 最小 Python 版本
minversion = 7.0

# 过滤器配置
filterwarnings =
    ignore::UserWarning
    error::FutureWarning
